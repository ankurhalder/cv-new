// Embedded data as fallback
const fallbackData = {
  "personal_information": {
    "name": "ANKUR HALDER",
    "title": "Software Engineer | Full Stack Web Development",
    "email": "ankur.halder12345@gmail.com",
    "website": "ankurhalder.in",
    "phone": "+91 97489 03490",
    "location": "13R Ishan Ghosh Road, Kolkata: 700008, West Bengal",
    "linkedin": "linkedin.com/in/ankurhalder",
    "github": "github.com/ankurhalder",
    "gitlab": "gitlab.com/ankurhalder",
    "coursera": "coursera.org/learner/ankurhalder"
  },
  "professional_summary": "B.Tech Computer Science graduate and Full Stack Software Engineer with international freelance experience, specializing in the MERN stack, TypeScript, and Next.js. Recognized as 'Techno Wiz of 2025' by IEM-UEM for outstanding technical prowess. Delivered production-ready, high-performance web solutions. Demonstrated expertise in building scalable applications, backed by 20+ professional certifications from IBM, Meta, and Google.",
  "experience": [
    {
      "role": "Full Stack Web Developer",
      "company": "Lake Como Style (Italy)",
      "type": "Freelance",
      "start_date": "Dec 2025",
      "end_date": "Jan 2026",
      "responsibilities": [
        "Designed and developed a complete cinematic event booking platform for an Italian client.",
        "Built a Next.js 16 application with React 19 and React Compiler for optimized performance.",
        "Integrated Sanity CMS with 11 custom schema types for full content management.",
        "Implemented Framer Motion animations with video auto-play handling and mobile optimization.",
        "Created custom transactional email system with branded HTML templates using Nodemailer.",
        "Delivered production-ready application with SEO optimization, theming, and accessibility features."
      ],
      "live_link": "https://www.lakecomostyle.it",
      "github_link": "https://github.com/ankurhalder/lakecomo"
    },
    {
      "role": "Front End Engineer Intern",
      "company": "Alien Brains Private Limited",
      "type": "Internship",
      "start_date": "Feb 13, 2025",
      "end_date": "Aug 31, 2025",
      "responsibilities": [
        "Collaborated with the development team to build responsive, interactive web interfaces using React.js and Tailwind CSS.",
        "Optimized frontend performance through lazy loading, code splitting, and refactoring legacy components to React Hooks.",
        "Integrated RESTful APIs for dynamic data display and managed global state using Redux Toolkit.",
        "Ensured cross-browser compatibility, responsiveness, and WCAG accessibility compliance.",
        "Implemented secure authentication flows (JWT), form validation (Formik), and unit testing (Jest).",
        "Translated Figma prototypes into pixel-perfect code and participated in Agile workflows including code reviews and CI/CD deployment."
      ],
      "certificate_link": "https://shorturl.at/TDq4k"
    }
  ],
  "education": [
    {
      "degree": "B.Tech, CSE",
      "institution": "UEM Kolkata",
      "year": "2021 - 2025",
      "score": "Avg CGPA: 7.57"
    },
    {
      "level": "Class XII (Science)",
      "institution": "Shri Ritam Vidyapith",
      "board": "WBCHSE",
      "year": "2021",
      "score": "76.60%"
    },
    {
      "level": "Class X",
      "institution": "Behala Aryya Vidyamandir",
      "board": "WBBSE",
      "year": "2017",
      "score": "85.70%"
    }
  ],
  "projects": {
    "note": "Portfolio includes 40+ personal projects on GitHub and collaboration on 8+ projects during tenure at Alien Brains (available on GitLab).",
    "featured_projects": [
      {
        "name": "Lake Como Style",
        "role": "Freelance Developer",
        "client": "International (Italy)",
        "tech_stack": [
          "Next.js 16",
          "React 19",
          "Sanity CMS",
          "Tailwind CSS 4",
          "Framer Motion",
          "TypeScript",
          "Nodemailer",
          "Lenis"
        ],
        "description": "Architected a high-performance, cinematic event booking platform using the bleeding-edge Next.js 16 and React 19 stack. Engineered a scalable content management system with Sanity to handle 11+ custom schema types, ensuring seamless client updates. Implemented complex UI animations using Framer Motion and Lenis for smooth scrolling, while building a robust transactional email service with Nodemailer for automated booking confirmations.",
        "live_link": "www.lakecomostyle.it",
        "github_link": "github.com/ankurhalder/lakecomo"
      },
      {
        "name": "Space Otaku",
        "award": "1st Prize Winner",
        "tech_stack": [
          "Next.js",
          "SCSS",
          "Dialogflow",
          "PWA",
          "Framer Motion",
          "Checkly",
          "React Game Engine"
        ],
        "description": "Developed an award-winning Progressive Web App (PWA) serving as a comprehensive space education hub. Engineered a custom, performance-optimized game engine within React for the 'Space Shooter' module. Integrated a conversational AI agent powered by Dialogflow for interactive learning and implemented a rigorous reliability suite using Checkly to monitor API health and uptime.",
        "live_link": "www.spaceotaku.ankurhalder.in",
        "github_link": "github.com/ankurhalder/spaceotaku"
      },
      {
        "name": "Eduversa",
        "role": "Group Leader",
        "tech_stack": [
          "Next.js",
          "MongoDB",
          "NextAuth.js",
          "Dialogflow",
          "SCSS",
          "RBAC"
        ],
        "description": "Led the development of a massive educational ERP platform featuring strict Role-Based Access Control (RBAC) for Admins, Faculty, Students, and Applicants. Engineered a multi-provider authentication system using NextAuth.js linked to a MongoDB cluster. Integrated a Dialogflow-powered support bot and built complex, multi-step administrative forms for seamless data management.",
        "live_link": "eduversa.vercel.app",
        "github_link": "github.com/eduversa/eduversa.github.io"
      },
      {
        "name": "AdComSys",
        "tech_stack": [
          "Next.js",
          "TypeScript",
          "MongoDB",
          "Dialogflow",
          "SCSS",
          "GitHub Actions"
        ],
        "description": "Built the official full-stack digital platform for an international technical conference using Next.js and TypeScript. Developed server-less API architecture to interface with a MongoDB database for dynamic schedule and paper management. Integrated a Dialogflow-powered AI support bot to handle real-time attendee queries, wrapped in a modular, responsive UI system styled with SCSS.",
        "live_link": "adcomsys.vercel.app",
        "github_link": "github.com/uem-conference/uem-conference.github.io"
      }
    ]
  },
  "technical_skills": {
    "languages": [
      "JavaScript",
      "TypeScript",
      "Python",
      "C"
    ],
    "frontend": [
      "React.js",
      "Next.js",
      "Tailwind CSS",
      "SCSS/CSS3",
      "React Native"
    ],
    "backend_database": [
      "Node.js",
      "Express",
      "MongoDB",
      "Sanity CMS",
      "REST API"
    ],
    "devops_tools": [
      "CI/CD",
      "Git/GitHub"
    ]
  },
  "spoken_languages": [
    "English",
    "Hindi",
    "Bengali"
  ],
  "achievements": [
    "Techno Wiz of 2025: Awarded by IEM-UEM for outstanding technical prowess.",
    "First Prize: Project Competition 2023 (5th Semester) for 'Space Otaku'."
  ],
  "certifications": {
    "ibm_professional": [
      {
        "name": "DevOps & Software Eng.",
        "certificate_url": "https://coursera.org/share/8c28237e4ade1ac0ac18e3940537ec7f"
      },
      {
        "name": "Applied DevOps Eng.",
        "certificate_url": "https://coursera.org/share/6835d92130ece171f73047315830b422"
      },
      {
        "name": "JS Backend Developer",
        "certificate_url": "https://coursera.org/share/4be649851bf526b76e876ee1fd8fb444"
      },
      {
        "name": "Back-End Development",
        "certificate_url": "https://coursera.org/share/ba5ff8d72ff44cb134d5bf2c75358cef"
      },
      {
        "name": "Front-End Developer",
        "certificate_url": "https://coursera.org/share/af1fbaa9ef21b87b61c7a57302c08c46"
      }
    ],
    "meta_google": [
      {
        "name": "Meta Back-End Developer",
        "certificate_url": "https://coursera.org/share/2927957967a7315b351bfa6bd46a23f8"
      },
      {
        "name": "Meta Front-End Developer",
        "certificate_url": "https://coursera.org/share/c15496f1373b7e20b83b6ac540950360"
      },
      {
        "name": "Meta Database Engineer",
        "certificate_url": "https://coursera.org/share/5ef6a47322c1b8eebb22bd7ab3e7d524"
      },
      {
        "name": "Google UX Design Pro",
        "certificate_url": "https://coursera.org/share/f67a6bed791511d901a8f0c82cffa946"
      },
      {
        "name": "Applied Software Eng.",
        "certificate_url": "https://coursera.org/share/4d1514dfd624da601f6d753a6fec2746"
      }
    ],
    "udemy_specialized": [
      {
        "name": "Next.js & React Guide",
        "certificate_url": "https://www.udemy.com/certificate/UC-fc0143a4-6b19-4e07-bcee-53f7c1f9fd1d"
      },
      {
        "name": "Node.js, Express, Mongo",
        "certificate_url": "https://www.udemy.com/certificate/UC-ea6816f6-5c07-4069-870d-65486f34d3ef"
      },
      {
        "name": "Complete JS: Zero to Expert",
        "certificate_url": "https://www.udemy.com/certificate/UC-19c4ac79-892a-47ad-b473-06600f7300c8"
      },
      {
        "name": "React Native Practical",
        "certificate_url": "https://www.udemy.com/certificate/UC-4d4d2b02-7b8d-4694-940f-73ade039b5f8"
      }
    ],
    "note": "Full list of 20+ certifications available on Linkedin"
  }
};

// Icons (SVG)
const Icons = {
    email: '<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg>',
    phone: '<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>',
    location: '<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>',
    website: '<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>',
    linkedin: '<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>',
    github: '<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>',
    gitlab: '<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m22 13.29-3.33-10a.42.42 0 0 0-.8 0L16 9a4.8 4.8 0 0 0-8 0L6.13 3.29a.42.42 0 0 0-.8 0L2 13.29a1 1 0 0 0 1.25 1.25L12 21.07l8.75-6.53a1 1 0 0 0 1.25-1.25z"></path></svg>',
    link: '<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>',
    education: '<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>',
    skills: '<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>',
    cert: '<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline></svg>',
    lang: '<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>',
    achieve: '<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline></svg>',
    exp: '<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg>',
    proj: '<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>',
    summary: '<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>'
};


document.addEventListener('DOMContentLoaded', async () => {
    let data = fallbackData;
    
    try {
        const response = await fetch('resume_data.json');
        if (response.ok) {
            data = await response.json();
            console.log("Loaded data from JSON file");
        }
    } catch (e) {
        console.warn("Could not load JSON file, using fallback data. Expected in offline mode.", e);
    }

    renderHeader(data.personal_information);
    renderContact(data.personal_information);
    renderEducation(data.education);
    renderSkills(data.technical_skills);
    renderCertifications(data.certifications);
    renderLanguages(data.spoken_languages);
    renderAchievements(data.achievements);
    renderSummary(data.professional_summary);
    renderExperience(data.experience);
    renderProjects(data.projects);
});

function renderHeader(info) {
    const header = document.getElementById('header');
    header.innerHTML = `
        <div class="header-content">
            <h1>${info.name}</h1>
            <h3>${info.title}</h3>
        </div>
        <img src="Ankur_halder.jpg" alt="${info.name}" class="profile-photo">
    `;
}

function renderContact(info) {
    const section = document.getElementById('contact-info');
    section.innerHTML = `
        <div class="contact-item"><span class="icon">${Icons.email}</span> <a href="mailto:${info.email}">${info.email}</a></div>
        <div class="contact-item"><span class="icon">${Icons.phone}</span> ${info.phone}</div>
        <div class="contact-item"><span class="icon">${Icons.location}</span> ${info.location}</div>
        <div class="contact-item"><span class="icon">${Icons.website}</span> <a href="https://${info.website}" target="_blank">${info.website}</a></div>
        <div class="contact-item"><span class="icon">${Icons.linkedin}</span> <a href="https://${info.linkedin}" target="_blank">LinkedIn (${info.linkedin})</a></div>
        <div class="contact-item"><span class="icon">${Icons.github}</span> <a href="https://${info.github}" target="_blank">GitHub (${info.github})</a></div>
        <div class="contact-item"><span class="icon">${Icons.gitlab}</span> <a href="https://${info.gitlab}" target="_blank">GitLab (${info.gitlab})</a></div>
    `;
}

function renderEducation(education) {
    const section = document.getElementById('education');
    section.querySelector('h2').innerHTML = `<span class="icon">${Icons.education}</span> Education`;
    
    const list = document.getElementById('education-list');
    list.innerHTML = education.map(edu => `
        <div class="edu-item">
            <span class="edu-institution">${edu.institution}</span>
            <span class="edu-degree">${edu.degree || edu.level}</span>
            <div class="edu-meta">${edu.year} | ${edu.score}</div>
        </div>
    `).join('');
}

function renderSkills(skills) {
    const section = document.getElementById('skills');
    section.querySelector('h2').innerHTML = `<span class="icon">${Icons.skills}</span> Technical Skills`;

    const list = document.getElementById('skills-list');
    const categories = [
        { key: 'languages', label: 'Languages' },
        { key: 'frontend', label: 'Frontend' },
        { key: 'backend_database', label: 'Backend & DB' },
        { key: 'devops_tools', label: 'DevOps & Tools' }
    ];

    list.innerHTML = categories.map(cat => `
        <div class="skill-category">
            <span class="skill-name">${cat.label}:</span>
            <span class="skill-list">${skills[cat.key].join(', ')}</span>
        </div>
    `).join('');
}

function renderCertifications(certs) {
     const section = document.getElementById('certifications');
    section.querySelector('h2').innerHTML = `<span class="icon">${Icons.cert}</span> Certifications`;

    const list = document.getElementById('certifications-list');
    
    let allCerts = [];
    
    // Helper to add org
    const addCerts = (source, orgName) => {
        if(source) {
            return source.map(c => ({...c, org: orgName}));
        }
        return [];
    };

    allCerts = allCerts.concat(addCerts(certs.ibm_professional, 'IBM'));
    allCerts = allCerts.concat(addCerts(certs.meta_google, 'Meta/Google'));
    allCerts = allCerts.concat(addCerts(certs.udemy_specialized, 'Udemy'));
    
    const html = allCerts.map(cert => `
       <div class="cert-item">
          <a href="${cert.certificate_url}" target="_blank" class="cert-name">â€¢ ${cert.name} <span style="font-weight:400; color:#666; font-size:9px">(${cert.org})</span></a>
       </div>
    `).join('');
    
    list.innerHTML = html + `<div class="note" style="margin-top:5px">Note: ${certs.note}</div>`;
}

function renderLanguages(languages) {
    const section = document.getElementById('languages');
    section.querySelector('h2').innerHTML = `<span class="icon">${Icons.lang}</span> Languages`;

    document.getElementById('languages-list').innerHTML = 
        languages.map(lang => `<li>${lang}</li>`).join('');
}

function renderAchievements(achievements) {
    const section = document.getElementById('achievements');
    section.querySelector('h2').innerHTML = `<span class="icon">${Icons.achieve}</span> Achievements`;

    document.getElementById('achievements-list').innerHTML = 
        achievements.map(ach => `<li>${ach}</li>`).join('');
}

function renderSummary(summary) {
    const section = document.getElementById('summary');
    section.querySelector('h2').innerHTML = `<span class="icon">${Icons.summary}</span> Professional Summary`;

    document.getElementById('summary-text').textContent = summary;
}

function renderExperience(experience) {
    const section = document.getElementById('experience');
    section.querySelector('h2').innerHTML = `<span class="icon">${Icons.exp}</span> Experience`;

    const list = document.getElementById('experience-list');
    list.innerHTML = experience.map(exp => `
        <div class="job-item">
            <div class="job-header">
                <div>
                     <span class="job-role">${exp.role}</span>
                     <span class="job-company"> @ ${exp.company}</span>
                </div>
                <span class="job-period">${exp.start_date} - ${exp.end_date}</span>
            </div>
            <ul>
                ${exp.responsibilities.map(r => `<li>${r}</li>`).join('')}
            </ul>
        </div>
    `).join('');
}

function renderProjects(projects) {
     const section = document.getElementById('projects');
    section.querySelector('h2').innerHTML = `<span class="icon">${Icons.proj}</span> Projects`;

    const list = document.getElementById('projects-list');
    list.innerHTML = projects.featured_projects.map(proj => `
        <div class="project-item">
            <div class="project-header">
                <span class="project-name">${proj.name}</span>
            </div>
            <div class="project-tech" style="font-size: 9px; margin-bottom: 2px;">${proj.tech_stack ? proj.tech_stack.join(', ') : ''}</div>
            <p>${proj.description}</p> 
            <div class="project-links">
                ${proj.live_link ? `<div style="margin-top:2px"><span class="icon small">${Icons.link}</span> <span style="font-weight:600">Live:</span> <a href="https://${proj.live_link}" target="_blank">${proj.live_link}</a></div>` : ''}
                ${proj.github_link ? `<div style="margin-top:1px"><span class="icon small">${Icons.github}</span> <span style="font-weight:600">GitHub:</span> <a href="https://${proj.github_link}" target="_blank">${proj.github_link}</a></div>` : ''}
            </div>
        </div>
    `).join('');
    
    document.getElementById('projects-note').textContent = projects.note;
}
